var LoadGLBFromMessage=pc.createScript("loadGLBFromMessage");LoadGLBFromMessage.prototype.initialize=function(){var e=this.app;function addMessageListener(){window.vuplex.addEventListener("message",(o=>{var n=o.data;"string"==typeof n&&n.endsWith(".glb")&&(console.log("Получена ссылка на модель:",n),e.fire("load-glb",n))}))}console.log("Init14"),window.vuplex?addMessageListener():window.addEventListener("vuplexready",addMessageListener),e.on("load-glb",(function(o){console.log("1"),pc.http.get(o,{responseType:"arraybuffer"},(function(o,n){if(o)console.error("Ошибка загрузки GLB:",o);else{console.log("2");var s=new Blob([n],{type:"model/gltf-binary"}),t=URL.createObjectURL(s);e.assets.loadFromUrl(t,"container",(function(o,n){if(o)console.error("Ошибка загрузки контейнера:",o);else{var s=n.resource.instantiateRenderEntity();s.setLocalPosition(0,0,0),e.root.addChild(s),console.log("Модель загружена!")}}))}}))}))};var OrbitCamera=pc.createScript("orbitCamera");OrbitCamera.attributes.add("target",{type:"entity",title:"Target"}),OrbitCamera.attributes.add("distance",{type:"number",default:5,title:"Distance from Target"}),OrbitCamera.attributes.add("minDistance",{type:"number",default:2,title:"Min Distance"}),OrbitCamera.attributes.add("maxDistance",{type:"number",default:15,title:"Max Distance"}),OrbitCamera.attributes.add("sensitivity",{type:"number",default:.3,title:"Mouse Sensitivity"}),OrbitCamera.attributes.add("zoomSensitivity",{type:"number",default:1,title:"Zoom Sensitivity"}),OrbitCamera.prototype.initialize=function(){this.yaw=0,this.pitch=0,this.isMouseDown=!1,this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this)},OrbitCamera.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&(this.isMouseDown=!0)},OrbitCamera.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&(this.isMouseDown=!1)},OrbitCamera.prototype.onMouseMove=function(t){this.isMouseDown&&(this.yaw-=t.dx*this.sensitivity,this.pitch-=t.dy*this.sensitivity,this.pitch=pc.math.clamp(this.pitch,-89,89))},OrbitCamera.prototype.onMouseWheel=function(t){this.distance-=t.wheel*this.zoomSensitivity*.1,this.distance=pc.math.clamp(this.distance,this.minDistance,this.maxDistance)},OrbitCamera.prototype.update=function(t){if(this.target){var i=new pc.Quat;i.setFromEulerAngles(this.pitch,this.yaw,0);var e=new pc.Vec3;e.copy(this.target.getPosition());var s=new pc.Vec3(0,0,this.distance);i.transformVector(s,s),e.add(s),this.entity.setPosition(e),this.entity.lookAt(this.target.getPosition())}};var Rotate360=pc.createScript("rotate360");Rotate360.attributes.add("target",{type:"entity"}),Rotate360.attributes.add("radius",{type:"number",default:5}),Rotate360.attributes.add("rotationSpeed",{type:"number",default:30}),Rotate360.attributes.add("minRadius",{type:"number",default:2}),Rotate360.attributes.add("maxRadius",{type:"number",default:10}),Rotate360.attributes.add("zoomSpeed",{type:"number",default:1}),Rotate360.prototype.initialize=function(){this.angle=0,this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this)},Rotate360.prototype.update=function(t){if(this.target){this.angle+=pc.math.DEG_TO_RAD*this.rotationSpeed*t;var e=this.target.getPosition(),a=e.x+this.radius*Math.sin(this.angle),i=e.z+this.radius*Math.cos(this.angle),o=e.y+2;this.entity.setPosition(a,o,i),this.entity.lookAt(e)}},Rotate360.prototype.onMouseWheel=function(t){this.radius-=t.wheel*this.zoomSpeed*.1,this.radius=pc.math.clamp(this.radius,this.minRadius,this.maxRadius),t.event.preventDefault()},Rotate360.prototype.destroy=function(){this.app.mouse.off(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this)};var LoadGLB=pc.createScript("loadGLB");LoadGLB.prototype.initialize=function(){this.app;function addMessageListener(){window.vuplex.addEventListener("message",(e=>{var t=e.data;"string"==typeof t&&t.endsWith(".glb")&&(console.log("Получена ссылка на модель:",t),this.url=t)}))}this.url=null,console.log("Init151"),window.vuplex?addMessageListener():window.addEventListener("vuplexready",addMessageListener)},LoadGLB.prototype.update=function(e){null!==this.url&&(this.load("https://raw.githubusercontent.com/Taduar2001/Models/main/Ball.glb"),this.url=null)},LoadGLB.prototype.load=function(e){var t=this.app;pc.http.get(e,{responseType:"arraybuffer"},(function(e,o){if(e)console.error("Ошибка загрузки GLB:",e);else{var n=new Blob([o],{type:"model/gltf-binary"}),a=URL.createObjectURL(n);t.assets.loadFromUrl(a,"container",(function(e,o){if(e)console.error("Ошибка загрузки контейнера:",e);else{var n=o.resource.instantiateRenderEntity();n.setLocalPosition(0,0,0),t.root.addChild(n)}}))}}))};